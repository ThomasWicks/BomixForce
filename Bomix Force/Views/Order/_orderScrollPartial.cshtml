@model List<Bomix_Force.ViewModels.OrderViewModel>
@{
    ViewData["Title"] = "OrderScroll";
}

@if (Model?.Count() > 0)
{
    foreach (var item in Model)
    {
        if (item.Item.Count > 0)
        {

            @foreach (var SubItem in item.Item.Select((x, i) => new { Value = x, Index = i }))
            {
                <tr>
                    <th class="text-center">
                        @item.Pedido

                    </th>
                    <th class="text-center ">
                        @SubItem.Value.Produto
                    </th>
                    <th class="text-center">
                        @SubItem.Value.Quantidade
                    </th>
                    <th class="text-center ">
                        @SubItem.Value.Arte
                    </th>
                    <th class="text-center">
                        @SubItem.Value.Personalizacao
                    </th>
                    @if (!User.IsInRole("User") && !User.IsInRole("Company"))
                    {
                        <th class="text-center">
                            @item.Cliente
                        </th>
                    }
                    <th class="text-center">
                        @Html.DisplayFor(modelItem => @item.Emissao)
                    </th>
                    <th class="text-center">
                        @item.Cidade - @item.UF
                    </th>
                    @if (@item.Status == "ENCERRADO")
                    {
                        <th class="mt-2 badge border border-danger">
                            <a class="text-danger">Encerrado</a>
                        </th>

                    }
                    else if (@item.Status == "ABERTO")
                    {
                        <th class="mt-2 badge border border-primary">
                            <a class="text-primary">Aberto</a>
                        </th>
                    }
                    else if (@item.Status == "LIBERADO")
                    {
                        <th class="mt-2 badge border border-success ">
                            <a class="text-success">Liberado</a>
                        </th>
                    }
                    else if (@item.Status == "ORCAMENTO")
                    {
                        <th class="mt-2 badge border border-secondary">
                            <a class="text-secondary">Orçamento</a>
                        </th>
                    }
                    else
                    {
                        <th class="mt-2 badge border border-info">
                            <a class="text-info">@item.Status</a>
                        </th>
                    }
                    @if (User.IsInRole("User"))
                        {
                    <th>
                        <div>

                            <button data-toggle="orderDetails" onclick="openConfirmationModal(this)" data-url="@Url.Action($"DuplicateData/{@item.id}")" data-target="#duplicateModal" class="btn btn-primary btn-lg float-right"><i class="fas fa-copy"></i></button>
                        </div>
                    </th>
                      }

                </tr>
            }
        }
        else
        {
            <tr>
                <th class="text-center">
                    @item.Pedido

                </th>
                <th class="text-center">
                    -
                </th>
                <th class="text-center">
                    -
                </th>
                <th class="text-center ">
                    -
                </th>
                <th class="text-center">
                    -
                </th>
                @if (!User.IsInRole("User") && !User.IsInRole("Company"))
                {
                    <th class="text-center">
                        @item.Cliente
                    </th>
                }
                <th class="text-center">
                    @Html.DisplayFor(modelItem => @item.Emissao)
                </th>
                <th class="text-center">
                    @item.Cidade - @item.UF
                </th>
                @if (@item.Status == "ENCERRADO")
                {
                    <th class="mt-2 badge border border-danger">
                        <a class="text-danger">Encerrado</a>
                    </th>

                }
                else if (@item.Status == "ABERTO")
                {
                    <th class="mt-2 badge border border-primary">
                        <a class="text-primary">Aberto</a>
                    </th>
                }
                else if (@item.Status == "LIBERADO")
                {
                    <th class="mt-2 badge border border-success ">
                        <a class="text-success">Liberado</a>
                    </th>
                }
                else if (@item.Status == "ORCAMENTO")
                {
                    <th class="mt-2 badge border border-secondary">
                        <a class="text-secondary">Orçamento</a>
                    </th>
                }
                else
                {
                    <th class="mt-2 badge border border-info">
                        <a class="text-info">@item.Status</a>
                    </th>
                }
                @if (User.IsInRole("User"))
                {
                    <th class="text-center">
                        <div class="d-inline-block">
                            <button data-toggle="orderDetails" onclick="openConfirmationModal(this)" data-url="@Url.Action($"DuplicateData/{@item.id}")" data-target="#duplicateModal" class="btn btn-primary btn-lg float-right"><i class="fas fa-copy"></i></button>
                        </div>
                    </th>
                }

            </tr>
        }

    }
}
<script>
    function openConfirmationModal(button) {
        var OrderDetailsElement = $('#OrderDetailsHere');
        var url = $(button).data('url');
        var decodedUrl = decodeURIComponent(url)
        $.get(decodedUrl).done(function (data) {
            OrderDetailsElement.html(data);
            OrderDetailsElement.find('.modal').modal('show');
        })
    }
</script>